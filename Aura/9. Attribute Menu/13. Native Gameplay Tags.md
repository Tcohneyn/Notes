# Native Gameplay Tags 制作与整合总结（00:00:01,250 → 00:09:10,300）

## 1. 制作任务说明

1.1 本节目标：在 C++ 中创建所有 **属性相关的 Native Gameplay Tags**
 1.2 已有的示例：Armor（护甲）标签
 1.3 任务要求：

- 将 **Vital Attributes（生命/法力）** 的最大值标签改为原生
- 将 **Primary（主要属性）** 与 **Secondary（次要属性）** 的所有标签转为 C++ 定义
- 删除旧的 `.ini` 配置中对应条目
- 蓝图中引用的部分需要重新绑定

------

## 2. 删除旧有标签（Max Health / Max Mana）

2.1 打开 **Project Settings → Gameplay Tags**
 2.2 找到 Vital → 删除 `Max Health`
 2.3 同样删除 `Max Mana`
 2.4 保存后关闭编辑器
 2.5 打开 `DefaultGameplayTags.ini` 验证：

- `Health` 与 `Mana` 仍保留
- `Max Health`、`Max Mana` 已被删除

------

## 3. 在代码中添加新的标签定义

3.1 在 `FAuraGameplayTags::InitializeNativeGameplayTags()` 中添加新的条目
 3.2 首先创建 **Secondary 属性** 中的两个标签：

```cpp
Attributes.Secondary.MaxHealth
Attributes.Secondary.MaxMana
```

3.3 然后依次添加剩余的 Secondary 属性：

- ArmorPenetration（护甲穿透）
- BlockChance（格挡几率）
- CriticalHitChance（暴击几率）
- CriticalHitDamage（暴击伤害）
- CriticalHitResistance（暴击抗性）
- HealthRegeneration（生命回复）
- ManaRegeneration（法力回复）
- MaxHealth / MaxMana（最大生命与最大法力）

------

## 4. 添加 Primary Attributes

4.1 创建以下 Primary 属性标签：

- `Attributes.Primary.Strength`
- `Attributes.Primary.Intelligence`
- `Attributes.Primary.Resilience`
- `Attributes.Primary.Vigor`
   4.2 每个标签均带有说明文字：
- Strength → 增加物理伤害
- Intelligence → 增加魔法伤害
- Resilience → 提升护甲与穿透
- Vigor → 增加生命值
   4.3 说明：
- 标签名拼写错误会直接影响游戏中注册的实际 Tag 名
- `AddNativeGameplayTag()` 函数需确保拼写完全一致

------

## 5. 函数调用结构优化

5.1 为清晰展示参数，将函数调用格式化为多行：

```cpp
UGameplayTagsManager::Get().AddNativeGameplayTag(
    FName("Attributes.Primary.Strength"),
    FString("Increases physical damage.")
);
```

5.2 每个属性标签调用一次
 5.3 保持逻辑清晰、注释规范，方便扩展

------

## 6. 代码注释组织与结构

6.1 在 `.cpp` 文件中添加多行注释区分两类标签：

```cpp
/* Primary Attributes */
...（主属性标签）
/* Secondary Attributes */
...（次属性标签）
```

6.2 整理出清晰的结构分区，方便维护

------

## 7. 编译与验证

7.1 编译项目 → 重新启动 Unreal 编辑器
 7.2 打开 **Project Settings → Gameplay Tags** 检查：

- 所有 Primary 与 Secondary 标签均标记为 **(Native)**
   7.3 确认：
- `Attributes.Primary` 下包含四个主属性
- `Attributes.Secondary` 下包含全部次属性

------

## 8. 蓝图中的使用验证

8.1 打开任意蓝图（示例：BP_HealthPotion）
 8.2 右键 → “Make Gameplay Tag Container From Tag”
 8.3 下拉选择单个标签时，可看到所有属性标签均可用
 8.4 这些 C++ 注册的标签与蓝图可完全兼容
 8.5 使用后可删除测试节点并保存蓝图

------

## 9. C++ 中访问 Native 标签

9.1 在代码中调用：

```cpp
const FAuraGameplayTags& Tags = FAuraGameplayTags::Get();
```

9.2 直接访问：

```cpp
Tags.Attributes_Primary_Strength
```

9.3 若需要输出调试：

```cpp
UE_LOG(LogTemp, Display, TEXT("%s"), *Tags.Attributes_Primary_Strength.ToString());
```

9.4 或直接链式调用 `FAuraGameplayTags::Get()` 获取单例

------

## 10. 清理与优化

10.1 移除之前的调试字符串输出
 10.2 保留必要的委托绑定逻辑（EffectAppliedToDelegate）
 10.3 确保系统稳定性与事件回调不受影响

------

## 11. 小结与成果

11.1 已完成：

- 全部 Primary 与 Secondary 属性标签的 C++ 原生化
- 旧 `.ini` 标签的清理
- 蓝图与 C++ 的互通验证
   11.2 当前状态：
- 代码结构清晰、可维护性高
- 原生标签已可在 C++、Blueprint 中直接调用
   11.3 下一步目标：
- 将所有属性逻辑（加成、计算公式）与这些标签绑定
- 扩展至 Gameplay Effects 与 AttributeSets

