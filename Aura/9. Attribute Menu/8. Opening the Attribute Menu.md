# UE5 UI 教程：属性按钮功能实现与菜单显示

## 一、功能目标（00:00:06 ～ 00:00:19）

- 点击 **Attributes 按钮** 时，在屏幕上显示 **属性菜单**。

------

## 二、按钮事件绑定（00:00:19 ～ 00:02:00）

- **按钮变量设置**
  - 确认 `Attribute Menu Button` 设置为 **Is Variable**，方便在 Graph 中访问。
- **事件构建（Event Construct）**
  - 类似于 BeginPlay，用于初始化。
  - 获取按钮子控件（`Button`），绑定 **OnClicked** 事件。
- **逻辑拆分**
  - 新建自定义事件：`AttributeMenuButtonClicked`。
  - 避免所有逻辑直接堆在 Event Construct 中，保持结构清晰。

------

## 三、点击后的逻辑处理（00:02:00 ～ 00:03:39）

- **禁止重复点击**
  - 点击后立即将按钮设置为 **Disabled**（Set Is Enabled = False）。
- **创建菜单实例**
  - 使用 `Create Widget` 创建 `WP_AttributeMenu`。
  - 调用 `GetPlayerController(0)` 作为参数。
  - 添加到 Viewport 显示。
- **测试效果**
  - 点击按钮后菜单成功显示，并填充整个 Viewport。
  - 其他 UI 元素依旧可用（如滚动框、关闭按钮等）。

------

## 四、修复菜单显示问题（00:03:39 ～ 00:05:07）

- **问题**：菜单填满整个 Viewport。
- **解决方案**：
  - 在 Attribute Menu 中使用 Overlay 控制尺寸。
  - 修改 Root → Overlay 包装，确保大小合适。
- **结果**：菜单显示为正确的窗口大小，而非全屏覆盖。

------

## 五、菜单位置与背景优化（00:05:07 ～ 00:06:55）

- **调整显示位置**
  - 使用 `Set Position in Viewport`，设置为 (50, 50) 偏移。
- **修复黑边问题**
  - 增加背景 Image 的 Padding，从 1 调整到 5（最终为 25, 25）。
- **保持按钮可见**
  - 将菜单位置下移，确保仍能看到 **灰掉的 Attributes 按钮**。

------

## 六、阶段总结与下一步（00:06:55 ～ 00:07:06）

- **已实现**：
  - 点击按钮 → 显示属性菜单
  - 按钮自动禁用，防止重复点击
  - 菜单大小、位置与背景优化完成
- **待实现**：
  - 添加 **关闭属性菜单** 的逻辑（下一步完成）。

------

