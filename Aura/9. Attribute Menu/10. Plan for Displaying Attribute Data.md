# 属性菜单数据展示系统 · 标题大纲总结（00:00:06,900 → 00:10:07,340）

## 一、目标

- 在属性菜单中展示：
  - 各个属性的数值
  - 属性名称
  - 其他相关信息（如提示信息 Tooltip 等）

## 二、引入 Widget Controller

- 遵循架构模式，为属性菜单单独创建 **Attribute Menu Widget Controller**
- 职责：
  - 监听 **Ability System Component** 的属性变化广播
  - 将变化信息传递给属性菜单

## 三、处理属性变化的两种模式

1. **逐属性绑定（低扩展性）**
   - 每个属性单独订阅广播、创建对应 delegate、再传给相应 Widget
   - 优点：高效，只有对应的 Widget 会更新
   - 缺点：扩展性差，每增加新属性需修改多处代码
2. **统一泛型广播（推荐）**
   - 使用单一 **OnAttributeChanged** delegate
   - 广播时携带：
     - Gameplay Tag
     - 属性名
     - 属性值
     - 描述（可用于 Tooltip）
   - Widget 根据 Gameplay Tag 判断是否与自己对应，若匹配则更新显示

## 四、数据组织与传递

- **AuraAttributeInfo 结构体**
  - 包含属性名、值、描述、对应的 Gameplay Tag 等信息
- **数据资产（Data Asset）**
  - 类型：`UAttributeInfo`
  - 功能：接收 Gameplay Tag，返回对应的 AuraAttributeInfo 结构体
  - 好处：数据驱动，灵活扩展

## 五、Gameplay Tag 管理

- 现有方式：`RequestGameplayTag(FName)`，但需硬编码字符串，容易出错
- 改进方式：
  - 创建一个集中式的 **全局 Gameplay Tag 变量类**
  - 避免到处手写字符串，提高安全性和可维护性

## 六、信息流动流程

1. Ability System → 广播属性变化
2. Widget Controller → 接收广播
3. Widget Controller → 解析对应的 Gameplay Tag
4. Widget Controller → 查找 Data Asset，获取 AuraAttributeInfo
5. Widget Controller → 广播泛型 OnAttributeChanged
6. Widget（行项）→ 检查 Tag 是否匹配 → 更新显示

## 七、下一步工作

1. 创建二级属性 Gameplay Tags
2. 建立 C++ 中更好的 Tag 管理方式
3. 创建 AuraAttributeInfo 结构体
4. 创建并填充 Attribute Info Data Asset
5. 编写 Attribute Menu Widget Controller
   - 监听 Ability System
   - 通过 Data Asset 查找属性信息
   - 广播给属性菜单 Widgets

