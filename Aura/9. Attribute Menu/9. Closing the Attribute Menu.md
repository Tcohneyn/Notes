# Attribute Menu - 打开与关闭逻辑实现

## 1. Close Button 功能实现

- 在 Attribute Menu 中找到按钮并重命名为 **Close Button**
- 勾选 “Is Variable”
- 在 **Event Construct** 中绑定 `OnClicked` 事件
- 点击时调用 **Remove from Parent** 来销毁 Widget

## 2. Overlay 与按钮状态问题

- 关闭 Attribute Menu 后，原先的 **Attributes Button** 被禁用
- 需要让 Overlay 在菜单关闭时重新启用按钮
- 避免 **Overlay 与 Attribute Menu** 之间的循环依赖

## 3. 使用 Event Dispatcher 通信

- 在 Attribute Menu 中新增 **Event Dispatcher：AttributeMenuClosed**
- 在 Widget **Event Destruct**（销毁时）广播该事件
- Overlay 订阅该事件，在接收到广播时执行逻辑

## 4. 重新启用 Attributes Button

- 在 Overlay 中：
  - 获取 Attribute Menu 的 `AttributeMenuClosed` 事件
  - 订阅后，在触发时调用 **SetIsEnabled(true)**
  - 注意：必须操作 **按钮本体 (Button Widget)**，而不是外层控件

## 5. 运行效果验证

- 打开 Attribute Menu → 点击 X 关闭 → Attributes Button 自动重新启用
- 可反复 **打开/关闭**，逻辑正常

## 6. 动态创建 vs. 隐藏显示

- 方式 A：每次 **创建 & 销毁** Widget（当前实现）
- 方式 B：仅创建一次，后续通过 **Visibility** 控制显示/隐藏
- 性能差异不大，两种方式均可
- 作者偏好 **创建/销毁方式**，避免后台 Widget 存在潜在响应

## 7. 下一步

- Attribute Menu 已能 **正常打开与关闭**
- 后续将实现 **显示属性值** 的功能

