# 资产管理器与 Native Gameplay Tags 初始化

## 1. 创建 Gameplay Tags 单例

1.1 定义 `FAuraGameplayTags` 单例
 1.2 提供静态函数 `InitializeNativeGameplayTags()`
 1.3 示例：添加 `Attributes.Secondary.Armor` 原生标签

## 2. 为什么需要 Asset Manager

2.1 在项目启动时调用 `InitializeNativeGameplayTags()`
 2.2 Asset Manager 是单例，负责加载 Primary Assets
 2.3 在 `StartInitialLoading()` 阶段初始化 Gameplay Tags

## 3. 创建 Aura Asset Manager 类

3.1 在 **Public 文件夹**下创建 `UAuraAssetManager`
 3.2 父类选择 `AssetManager`
 3.3 命名为 **AuraAssetManager**

## 4. 定义单例访问函数

4.1 在 `UAuraAssetManager` 中添加静态 `Get()`
 4.2 检查 `GEngine` 是否有效
 4.3 获取并强转为 `UAuraAssetManager`
 4.4 返回该单例引用

## 5. 重写初始化函数

5.1 重写 `StartInitialLoading()`
 5.2 调用 `Super::StartInitialLoading()`
 5.3 调用 `FAuraGameplayTags::InitializeNativeGameplayTags()` 完成注册

## 6. 配置 Asset Manager

6.1 打开 **DefaultEngine.ini**
 6.2 在 `[Script/Engine.Engine]` 下配置：

```ini
AssetManagerClassName=/Script/ProjectName.AuraAssetManager
```

6.3 注意省略 `U` 前缀

## 7. 验证 Native Gameplay Tags

7.1 启动引擎 → 项目设置 → Gameplay Tags
 7.2 验证标签：

- `Attributes.Secondary.Armor` 显示为 `(Native)`
- 非 Native 标签（如 Health）显示来源为 `.ini`

## 8. Native 与 DataTable 标签的取舍

8.1 Primary Attributes 初始可能在 DataTable 中定义
 8.2 若改为 Native：

- 删除 Gameplay Tag Table 相关表
- 在代码里通过单例定义
   8.3 蓝图/资源可能失效，需要重新绑定

## 9. 在 C++ 中访问 Native Tags

9.1 获取单例：

```cpp
const FAuraGameplayTags& GameplayTags = FAuraGameplayTags::Get();
```

9.2 使用方式：`GameplayTags.Attributes_Secondary_Armor`
 9.3 `FGameplayTag` 可 `ToString()` 转字符串

## 10. 调试与验证

10.1 使用 `GEngine->AddOnScreenDebugMessage()` 打印
 10.2 确认 Armor 标签已成功注册
 10.3 多次打印是因为每个 AbilitySystemComponent 初始化时都会触发

## 11. 小结

11.1 已实现：

- 自定义 Asset Manager
- 初始化 Native Gameplay Tags
- 在代码中访问与验证

11.2 下一步：

- 将 Primary、Secondary、Vital 等属性标签转为 Native
- 统一管理、便于使用

------

要不要我帮你把 **之前的 00:00:00 → 00:06:50** 部分总结也改成这种 **数字排序格式**，然后合并在一起？