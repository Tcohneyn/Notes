这段视频记录了如何正式实现远程攻击敌人的**石块飞行物发射逻辑**，并针对视觉效果、物理表现以及团队伤害判定进行了全方位的优化。

以下是内容的标题大纲式详细总结：

### 一、 实现飞行物发射逻辑

- **函数调用**：利用 C++ 类中已有的 `SpawnProjectile` 蓝图可调用函数，替换掉之前的调试球体。
- **方向定位**：通过 `CombatInterface` 获取当前战斗目标（Combat Target），并将其位置（Actor Location）作为飞行物的射击目标位置。
- **自动定位**：函数内部会自动处理从武器插槽（如 Pouch）到目标位置的轨迹计算。

### 二、 飞行物视觉强化

为了让石块在场景中更清晰、更逼真，作者进行了多项调整：

- **尺寸缩放**：将石块网格体（Rock Mesh）的缩放比例从 1.0 提高到 **1.25**，使其在混乱的战斗中更易被玩家捕捉。
- **材质优化（边缘发光）**：
  - 引入 **Fresnel（菲涅尔）** 节点，为石块边缘添加发光效果。
  - 使用颜色乘法器（Multiply）赋予石块金棕色或淡红色的发光效果，提升辨识度。
  - 调整指数和反射比例，确保暗处表现更佳，同时避免在亮处完全不可见。

### 三、 飞行物动态表现：随机自旋

为了增加写实感，石块在飞行时不再固定不动：

- **自旋初始化**：在 `BeginPlay` 时，为 Yaw、Pitch 和 Roll 随机分配 **-500 到 500** 之间的旋转速率变量。
- **逐帧更新**：在 `Tick` 事件中，使用 `AddLocalRotation` 结合 `Delta Seconds`，使石块在飞行过程中产生随机方向和速度的翻滚效果。

### 四、 核心逻辑优化：团队免伤（Friendly Fire）

- **问题发现**：初始测试中，敌人发射的石块会误伤友方单位。
- **代码修改（C++）**：在 `AuraProjectile` 的重叠事件（`OnSphereOverlap`）中加入判断。
- **逻辑实现**：调用 `UAuraAbilitySystemLibrary::IsNotFriend` 函数。
  - 如果重叠的对象是“盟友”（即 `IsNotFriend` 为假），则直接返回（Return），不产生任何伤害或碰撞效果。
- **验证结果**：测试证实，敌人石块现在会穿过队友，仅对玩家（Aura）造成伤害，同时玩家的攻击依然能伤害敌人。

### 五、 细节调整与后续预告

- **弹道微调**：观察到受重力影响，石块弹道有时偏低。作者提到未来可能会加入 **Pitch Override（仰角修正）** 逻辑，使飞行物在发射时略微向上倾斜。
- **下阶段目标**：目前的石块发射已趋于完善，下一步将聚焦于**弹弓武器的物理形变动画**，实现皮筋拉伸和弹射的真实视觉回馈。

Would you like me to clarify any of the C++ logic or material graph steps mentioned in the tutorial?