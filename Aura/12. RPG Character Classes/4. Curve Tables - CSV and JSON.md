# Unreal Engine：使用曲线表（Curve Table）管理角色属性流程总结

### 1. 🎯 目标：为主要属性设置可缩放的修改器

- 教程开始时指出，`Data Asset Character Class Info`（数据资产角色类别信息）中分配的游戏效果（Gameplay Effects）是存在的 1，但这些主要属性的游戏效果（GE）目前没有任何修改器（Modifiers）。
- 目标是为这些GE添加修改器，并使用曲线表（Curve Tables），以便根据等级（Level）查询曲线，从而动态设置属性值 。

### 2. 🪄 第1步：为元素师（Elementalist）创建曲线表

- **创建资源**：
  - 首先，在内容浏览器中创建一个名为 `Curve Tables` 的新文件夹 。
  - 在文件夹内，右键点击选择 `Miscellaneous`（杂项），然后选择 `Curve Table`（曲线表）。
  - 在插值类型（Interpolation Types）中，教程解释了：`Linear`（线性）是键之间的直线 ，`Constant`（恒定）是没有插值的水平线 ，而 `Cubic`（立方）则是在键之间创建平滑的曲线 。
  - 教程选择使用 `Cubic`（立方），并将新资源命名为 `CT_PrimaryAttributes_Elementalist` 。
- **编辑曲线表**：
  - 打开曲线表资源，X轴默认代表时间（秒），但在这个情境中，它被用作“等级” 。
  - 使用插值的好处是我们不必为*每一*等级都设置一个值 。
- **配置曲线（Curves）**：
  1. **Strength（力量）**：
     - 将第一条曲线重命名为与Gameplay Tag匹配的 `Attributes.Primary.Strength` 。
     - 为元素师添加键（Key），因为元素师的力量值较低 ：
       - 等级 1：值 5 
       - 等级 5：值 7 
       - 等级 10：值 9.5 
       - 等级 15：值 12.5 
       - 等级 20：值 14 
       - 等级 40：值 25 
     - 添加键后，通过框选所有点，右键点击并选择 `Auto`，可以将它们转换为平滑的立方曲线 。
  2. **Intelligence（智力）**：
     - 添加新曲线，重命名为 `Attributes.Primary.Intelligence` 。
     - 元素师的智力值更高 ：
       - 等级 1：值 15 
       - 等级 5：值 19 
       - 等级 10：值 21 
       - 等级 20：值 25 
       - 等级 40：值 40 
  3. **Resilience（韧性）**：
     - 添加新曲线，重命名为 `Attributes.Primary.Resilience` 。
     - 只添加了两个键来演示趋势：
       - 等级 1：值 11 
       - 等级 40：值 20 
  4. **Vigor（活力）**：
     - 添加新曲线，重命名为 `Attributes.Primary.Vigor` 。
     - 同样只添加了两个键：
       - 等级 1：值 7 
       - 等级 40：值 14 

------



### 3. ⚙️ 第2步：将曲线表应用到元素师的GE

- 打开 `GE_PrimaryAttributes_Elementalist` 游戏效果资源 。

- 这是一个“Instant”（即时）持续策略的GE 。

- 在 `Modifiers`（修改器）部分，添加四个新条目 。

- **配置每个修改器**：

  - **Attribute（属性）**：选择对应的主要属性（如 `Strength`）。
  - **Modifier Op（修改器操作）**：设置为 `Override`（覆盖）。
  - **Modifier Magnitude（修改器大小）**：
    - 类型（Magnitude Calculation Type）: `Scalable Float`（可缩放浮点数）。
    - Magnitude（值）: 输入 `1.0` 。
    - **Curve Table（曲线表）**：选择我们创建的 `CT_PrimaryAttributes_Elementalist` 。
    - **Curve（曲线）**：从下拉菜单中选择对应的曲线名称（例如 `Attributes.Primary.Strength`）。

- 为智力、韧性和活力重复此过程 。

  

------



### 4. 🔄 第3步：创建曲线表的替代方法（CSV 和 JSON）

教程指出，为战士（Warrior）和游侠（Ranger）重复上述手动过程很繁琐 ，因此展示了两种更快的数据驱动方法 。

- **方法A：CSV（逗号分隔值）**
  1. **导出**：右键点击 `CT_PrimaryAttributes_Elementalist` 资源，选择 `Export as CSV`（导出为CSV）。
  2. **编辑**：CSV文件可以在Excel等电子表格软件中打开 。在Excel中，第一行是X轴值（等级），后续每一行代表一个属性曲线 。
  3. **重导**：在Excel中修改值并保存后 ，可以返回虚幻引擎，打开曲线表资源，点击“Re-import”（重新导入）按钮，选择修改后的CSV文件。
  4. **缺点**：从CSV重新导入后，曲线会失去 `Cubic`（立方）的平滑插值，并被强制变为 `Linear`（线性）插值。
  5. **创建游侠（Ranger）**：教程演示了在Excel中“另存为” `CT_PrimaryAttributes_Ranger.csv`，修改其中的值，然后在虚幻引擎中创建一个新的空曲线表，再使用“Re-import”功能导入这个新的Ranger CSV文件。
- **方法B：JSON**
  1. **导出**：右键点击曲线表（例如Ranger的），选择 `Export as JSON`（导出为JSON）。
  2. **编辑**：JSON文件可以在记事本等文本编辑器中打开 53。它使用不同的语法（花括号和方括号）。
  3. **创建战士（Warrior）**：教程演示了“另存为” `PrimaryAttributes_Warrior.json` ，并直接在记事本中修改数值 。
  4. **导入（关键区别）**：**不要**创建空资源，而是直接点击内容浏览器的 `Import`（导入）按钮 。
  5. 选择 `Warrior.json` 文件，此时会弹出一个导入选项窗口 。
  6. 在窗口中，选择导入为 `Curve Table`（曲线表），并将插值类型设置为 `Cubic`（立方）。
  7. **优点**：通过这种方式导入的JSON文件会正确创建一个新的曲线表，并且**保留了 `Cubic`（立方）平滑插值**，曲线句柄（handles）仍然可以调整 。这使其成为比CSV更优越的方法 。

------



### 5. ⚔️🛡️ 第4步：应用战士和游侠的曲线表

- 使用新创建的 `CT_PrimaryAttributes_Ranger` 和 `PrimaryAttributes_Warrior` 曲线表，教程重复了第2步中的过程。
- 打开 `GE_PrimaryAttributes_Ranger` 和 `GE_PrimaryAttributes_Warrior` 资源，分别为它们设置4个修改器（Modifiers），使其指向各自的曲线表和曲线 。

------



### 6. ⚡️ 第5步：优化敌人的次要属性GE

- **情景分析**：

  - 玩家（Aura）的次要属性GE（`GE_SecondaryAttributes`）被设置为 `Infinite`（无限）持续时间 。
  - 这是因为如果玩家的主要属性（如力量）发生变化，次要属性（如护甲）需要自动重新计算 。
  - 对于敌人，教程的计划是它们的主要属性在出生时根据等级设置一次，之后在运行时**不会**改变 。

- **执行操作**：

  - 因此，敌人不需要“无限”的GE，一个“即时”的GE就足够了 。
  - 教程复制了 `GE_SecondaryAttributes`，将其重命名为 `GE_SecondaryAttributes_Enemy` 。
  - 打开这个新的 `_Enemy` GE，将其 `Duration Policy`（持续策略）从 `Infinite`（无限）更改为 `Instant`（即时）。

- **总结**：数据资产（Data Asset）现在已完全准备好，可以为敌人初始化主要和次要属性了 。

  

  