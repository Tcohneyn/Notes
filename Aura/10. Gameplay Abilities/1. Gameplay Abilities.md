# 🎮 Gameplay Ability System 核心概念（00:00:06,930 ～ 00:05:08,560）

------

## 一、Gameplay Ability 的定义与作用

- **Gameplay Ability** 是可执行的动作或技能（例如攻击、施法、闪避等）。
- 它继承自 `UGameplayAbility` 类，定义了：
  - 该技能的执行逻辑。
  - 使用条件（是否能施放、触发时机等）。

------

## 二、区别于普通函数的特性

- 与简单的函数调用不同，Gameplay Ability 是 **异步运行的实例对象**。
- 可以：
  - **延时执行**、分阶段运行。
  - **包含多任务（multi-stage tasks）**。
  - **跨越时间段持续存在**。

------

## 三、核心机制与功能扩展

### 1. 多阶段与任务分支

- Ability 内部可以分支成不同的 **Ability Tasks**。
- 每个 Task 能触发 Gameplay Effects 或 Gameplay Cues。

### 2. 异步执行与事件驱动

- Gameplay Ability 可随游戏事件触发（例如玩家输入、环境交互）。
- **内置网络复制与预测机制**：
  - 客户端可提前预测触发，服务端校验结果。

------

## 四、Cost 与 Cooldown（消耗与冷却）

- 每个能力可定义 **消耗资源（Cost）** 与 **冷却时间（Cooldown）**：
  - 消耗示例：魔力（Mana）、体力、能量等。
  - 若资源不足，无法激活能力。
- **冷却机制**：
  - 防止能力短时间内被重复触发。

------

## 五、Ability Task（能力任务）

### 1. 概念与继承关系

- 派生自 `UAbilityTask`（它又是 `UGameplayTask` 的特化版）。
- 在能力执行过程中执行异步工作。

### 2. 特点与用途

- 可通过 **Delegate（委托）广播事件** 改变执行流程。
- 在 Blueprint 中表现为带多个输出执行引脚的节点。
- 当游戏中发生特定事件时：
  - Ability Task 触发委托 → 对应的蓝图执行引脚被激活。

### 3. 优势

- 蓝图可清晰可视化能力逻辑。
- 主要工作可在 **C++ 实现**，兼具性能与灵活性。
- 设计师无需编写 C++ 即可在蓝图中搭建复杂技能。

------

## 六、Ability Grant（授予与复制）

- 要让角色能使用能力，必须通过 **Ability System Component (ASC)** 授予。
  - 授予时会创建 **Gameplay Ability Spec（能力规格）**：
    - 包含 Ability 类、等级、运行时数据等。
- 授予操作通常在 **服务器端** 完成。
  - 然后通过 **复制（Replication）** 同步到客户端。

------

## 七、Ability 的激活与生命周期

- 激活后，Ability 进入 **Active 状态**。
- 直到：
  - 自行结束（End）。
  - 或被外部取消（Cancel）。
- 生命周期包含：
  - 授予 → 激活 → 执行 → 结束/取消。

------

## 八、总结

| 概念                         | 说明                     |
| ---------------------------- | ------------------------ |
| **Gameplay Ability**         | 定义技能/动作逻辑的类    |
| **Ability Task**             | 异步执行的分阶段任务单元 |
| **Ability Spec**             | 定义能力等级与运行时数据 |
| **Cost / Cooldown**          | 使用消耗与冷却限制       |
| **Activation**               | 能力的触发与执行流程     |
| **Replication / Prediction** | 支持多人同步与客户端预测 |

**核心定义：**

游戏玩法能力是用于定义游戏角色技能或能力的类。

**关键特性与流程：**

1. **授予机制：** 能力必须被授予角色后才能使用。 授予操作在**服务器**端执行，然后将其规格说明复制到所属的客户端。
2. **激活使用：** 能力被授予后，必须经过**激活**才能正式使用。
3. **资源管理：** 能力通常有**消耗（如魔法值、能量）** 和**冷却时间** 的限制。
4. **异步执行：** 能力以**异步方式**运行，这意味着一个角色可以**同时有多个能力处于激活状态**，互不阻塞。
5. **能力任务：** 能力通过 **“Ability Tasks”** 来具体执行各种操作（如播放动画、发射抛射物等）。这些任务也是异步执行的，允许能力在其持续时间内处理复杂的行为。

总而言之，这是一个由服务器控制、支持复杂并发操作的技能系统框架，常见于多人网络游戏中。

------

## 九、课程展望

- 通过 Gameplay Ability System，我们可以：
  - 为角色添加技能与特殊能力。
  - 实现异步执行、条件触发与视觉特效联动。
- 接下来的视频将开始编写第一个实际能力（First Ability）。

