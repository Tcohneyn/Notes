# 🎯输入配置数据资产

**基于输入系统的能力激活与数据驱动映射设计**

------

### 🧩一、输入与能力系统的关系

**输入**

**将输入绑定到技能系统组件**

- 这是在增强输入系统出现之前的一种方案。
- 输入曾经直接绑定到特定的技能上。
- 使用一个包含技能输入常量的枚举来管理。
- 这种方式比较**僵化**。

**增强输入**

- **输入操作** 通过 **输入映射上下文** 绑定到具体的物理输入上。
- 我们可以决定如何响应输入操作来激活相应的技能。
- Lyra 示例项目提供了一种实现范例。
- 我们将采用一种类似的方法（但会相对简化）。
- **数据驱动**。
- 可以在**运行时**更改输入到技能的映射关系。

------

### ⚙️二、数据驱动方案设计

- 目标：可在 **运行时修改** 输入与能力的映射关系。
- 核心思路：
  1. 创建一个 **Data Asset（AuraInputConfig）**。
  2. 数据中存放 **InputAction** 与 **GameplayTag** 的对应关系。
  3. 能力通过检查自身绑定的 **GameplayTag** 来确定响应的输入。

------

### 📚三、核心数据结构定义

#### 1️⃣ Struct：`FAuraInputAction`

- 内容：
  - `UInputAction* InputAction` —— 输入动作指针。
  - `FGameplayTag InputTag` —— 与输入对应的游戏标签。
- 属性：`EditDefaultsOnly`, `BlueprintReadOnly`。
- 功能：建立 **InputAction ↔ GameplayTag** 的配对关系。

#### 2️⃣ Data Asset：`UAuraInputConfig`

- 成员：`TArray<FAuraInputAction> AbilityInputActions`。

- 功能：在蓝图中编辑映射表。

- 方法：

  ```cpp
  const UInputAction* FindAbilityInputActionForTag(FGameplayTag InputTag, bool bLogNotFound = false) const;
  ```

  - 遍历数组查找对应输入。
  - 若找不到则记录 Log。
  - 返回对应的 InputAction 指针。

------

### 🧱四、输入 Gameplay Tag 注册

- 在 `AuraGameplayTags.cpp` 中注册：

  ```
  InputTag.LMB     // 左键
  InputTag.RMB     // 右键
  InputTag.1
  InputTag.2
  InputTag.3
  InputTag.4
  ```

- 每个标签均有说明文字（如 “Input Tag for Left Mouse Button”）。

- 注册方式：`AddNativeGameplayTag()`。

------

### 🧰五、编译与蓝图配置

1. 编译修正：`const` 关键字在 `GameplayTag` 上不被支持，需移除。
2. 蓝图中创建：
   - Data Asset：`DA_AuraInputConfig`。
   - 添加各输入动作（如 IA_LMB、IA_RMB、IA_1~4）。
   - 为每个动作分配对应的 GameplayTag。

------

### 💡六、系统特点总结

| 特点       | 描述                                           |
| ---------- | ---------------------------------------------- |
| 🔗 数据驱动 | 输入与能力的映射可动态修改，无需硬编码         |
| 🧩 灵活扩展 | 可轻松增加或替换输入                           |
| 🧠 逻辑解耦 | 输入逻辑独立于能力系统                         |
| 🧰 兼容性好 | 支持 Enhanced Input，适用于复杂项目（如 Lyra） |

------

是否需要我帮你把这一章的总结标题加入到你之前的总汇（和“Server Respects Remote Ability Cancellation”等同级）里？