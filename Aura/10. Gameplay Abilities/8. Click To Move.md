### 【Click to Move 功能实现原理与设计思路】

#### 一、功能目标

- 在拥有输入和回调系统的基础上，实现角色的 **Click to Move（点击移动）** 功能。
- 目标是实现点击地面后角色自动移动到该位置，且支持多人联机同步。

------

#### 二、现有模板的分析

- Unreal Engine 提供了 **Top Down 模板**，其中已实现基础的 Click to Move。
- **当前模板问题：**
  - 单人模式下可正常运行；
  - 多人模式（Listen Server / Client）中：
    - **按住点击可移动**（`Add Movement Input`）——可同步；
    - **点击释放后不移动**（`Simple Move to Location`）——客户端无效，仅服务器有效。

------

#### 三、原因分析

- 模板中使用了两个逻辑：
  1. **长按移动：** 调用 `AddMovementInput()` —— 基于 Movement Component，可自动同步。
  2. **短按自动寻路：** 调用 `SimpleMoveToLocation()` —— 仅服务器端 AI 有效，**客户端无效且无复制机制**。

------

#### 四、结论与启示

- `AddMovementInput()`：
  - 需 **每帧调用**，但可在多人游戏中正常同步。
- `SimpleMoveToLocation()`：
  - 仅适用于服务器 AI，不适合玩家控制的客户端角色。

------

#### 五、改进方向：实现“短按自动寻路 + 平滑路径”

1. **基础移动：**
   - 每帧计算角色到目标点的方向向量；
   - 持续调用 `AddMovementInput()` 实现平滑移动。
2. **避障与寻路：**
   - 使用导航网格（`NavMesh Bounds Volume`）进行路径点计算；
   - 解决障碍物阻挡问题。
3. **路径平滑化（Spline 曲线）**：
   - 将路径点生成 **样条曲线（Spline）**；
   - 沿曲线切线方向平滑移动，避免突然转向或角度跳变。

------

#### 六、最终方案要点

- 使用 **Add Movement Input + Spline Path** 实现：
  - 客户端平滑同步；
  - 支持自动寻路；
  - 方向变化自然，视觉表现流畅。

------

#### 七、下一步计划

- 在下个视频中正式实现该平滑 Click to Move 系统。