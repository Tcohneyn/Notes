### ğŸ¯ æ€»æ ‡é¢˜ï¼šåˆ›å»ºå¹¶æˆäºˆåŸºç¡€ Gameplay Abilityï¼ˆåŸºç¡€æŠ€èƒ½ç³»ç»Ÿå®ç°ï¼‰

------

#### ä¸€ã€åˆ›å»ºåŸºç¡€ Gameplay Ability ç±»

- åœ¨ C++ ä¸­æ–°å»ºä¸€ä¸ªç»§æ‰¿è‡ª `UGameplayAbility` çš„ç±»ï¼Œç”¨ä½œæ‰€æœ‰æŠ€èƒ½çš„åŸºç±»ã€‚
- è·¯å¾„ï¼š`C++ Classes/Public/AbilitySystem/Abilities`ã€‚
- å‘½åç¤ºä¾‹ï¼š`AuraGameplayAbility`ï¼ˆæˆ–æ ¹æ®é¡¹ç›®å‰ç¼€å‘½åï¼‰ã€‚
- åˆ›å»ºå `.h` å’Œ `.cpp` æ–‡ä»¶ä¸ºç©ºï¼Œç”¨äºæ—¥åæ‰©å±•é€šç”¨åŠŸèƒ½ã€‚

------

#### äºŒã€è§’è‰²ç±»ä¸­æ·»åŠ æŠ€èƒ½æ•°ç»„

- åœ¨ `AuraCharacterBase` ä¸­æ·»åŠ ä¸€ä¸ª `TArray<TSubclassOf<UGameplayAbility>> StartupAbilities`ã€‚
- ä½¿ç”¨ `UPROPERTY(EditAnywhere, Category = "Abilities")` æ ‡è®°ã€‚
- ç”¨äºå­˜æ”¾æ¸¸æˆå¼€å§‹æ—¶åº”æˆäºˆè§’è‰²çš„æŠ€èƒ½ã€‚
- å®šä¹‰ä¸ºç§æœ‰æˆå‘˜ã€‚

------

#### ä¸‰ã€æ·»åŠ æˆäºˆæŠ€èƒ½çš„å‡½æ•°

1. **è§’è‰²ç±»ä¸­æ·»åŠ å‡½æ•°**

   - æ–°å»º `void AddCharacterAbilities();`ï¼ˆProtectedï¼‰ã€‚

   - ä»…åœ¨æœåŠ¡å™¨ç«¯æ‰§è¡Œï¼š

     ```cpp
     if (!HasAuthority()) return;
     ```

   - é€šè¿‡ Ability System Component è°ƒç”¨æˆäºˆå‡½æ•°ã€‚

2. **Ability System Component ä¸­å®ç°æˆäºˆé€»è¾‘**

   - æ–°å»º `void AddCharacterAbilities(const TArray<TSubclassOf<UGameplayAbility>>& StartupAbilities);`

   - éå†æ•°ç»„ï¼Œä¸ºæ¯ä¸ª Ability ç±»åˆ›å»º `FGameplayAbilitySpec`ï¼š

     ```cpp
     FGameplayAbilitySpec AbilitySpec(AbilityClass, 1);
     ```

   - ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•æˆäºˆï¼š

     - `GiveAbility(AbilitySpec)`
     - æˆ– `GiveAbilityAndActivateOnce(AbilitySpec)`ï¼ˆç«‹å³æ¿€æ´»ï¼‰

   - æ³¨æ„ï¼šåè€…çš„å‚æ•°ä¸èƒ½ä¸º `const`ã€‚

------

#### å››ã€åœ¨è§’è‰²ä¸­è°ƒç”¨æˆäºˆå‡½æ•°

- åœ¨ `PossessedBy()` ä¸­è°ƒç”¨ `AddCharacterAbilities()`ã€‚
- ç¡®ä¿åœ¨è°ƒç”¨ `InitAbilityActorInfo()` ä¹‹åæ‰§è¡Œã€‚
- ä½¿ç”¨ `CastChecked<UAuraAbilitySystemComponent>` è·å–ç»„ä»¶å¼•ç”¨ã€‚

------

#### äº”ã€åœ¨è“å›¾ä¸­è®¾ç½®ä¸æµ‹è¯•æŠ€èƒ½

1. **åˆ›å»ºæµ‹è¯•æŠ€èƒ½è“å›¾**
   - åŸºäº `AuraGameplayAbility` åˆ›å»º `GA_TestGameplayAbility`ã€‚
   - ç¼–è¾‘äº‹ä»¶å›¾è¡¨ï¼š
     - åœ¨ `Event ActivateAbility` æ‰“å° â€œTest Ability Activatedâ€ã€‚
     - åœ¨ `Event EndAbility` æ‰“å° â€œTest Ability Endedâ€ã€‚
     - ä½¿ç”¨ `Delay(5.0)` åè°ƒç”¨ `EndAbility()`ã€‚
2. **åœ¨è§’è‰²è“å›¾ä¸­æ·»åŠ æŠ€èƒ½**
   - æ‰“å¼€ `BP_AuraCharacter`ï¼Œåœ¨ `Startup Abilities` ä¸­æ·»åŠ åˆšåˆ›å»ºçš„ `GA_TestGameplayAbility`ã€‚
3. **è¿è¡Œæµ‹è¯•**
   - ç¼–è¯‘ã€ä¿å­˜å¹¶è¿è¡Œæ¸¸æˆã€‚
   - è¿è¡Œååº”æ˜¾ç¤ºï¼š
     - â€œTest Ability Activatedâ€ â†’ å»¶è¿Ÿ 5 ç§’ â†’ â€œTest Ability Endedâ€ã€‚

------

#### å…­ã€æ€»ç»“

- âœ… åˆ›å»ºäº†åŸºç¡€æŠ€èƒ½ç±» `AuraGameplayAbility`ã€‚
- âœ… åœ¨è§’è‰²ç±»ä¸­æ·»åŠ äº†å¯åŠ¨æŠ€èƒ½æ•°ç»„ã€‚
- âœ… ç¼–å†™äº†æˆäºˆæŠ€èƒ½çš„å‡½æ•°å¹¶åœ¨æœåŠ¡å™¨ç«¯è°ƒç”¨ã€‚
- âœ… åˆ›å»ºäº†æµ‹è¯•ç”¨æŠ€èƒ½è“å›¾éªŒè¯æ¿€æ´»ä¸ç»“æŸé€»è¾‘ã€‚
- âœ… å®ç°äº†ä»è§’è‰² â†’ AbilitySystem â†’ GameplayAbility çš„å®Œæ•´æˆäºˆä¸æ¿€æ´»æµç¨‹ã€‚

