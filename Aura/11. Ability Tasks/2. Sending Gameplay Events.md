# ✅ 标题大纲式总结｜使用 Anim Notify 发送 Gameplay Event（延迟投射物生成）

------

## **一、回顾与目标**

- 回顾已学习的 Ability Task 用法（Play Montage and Wait）
- 当前问题：所有节点如何协同仍不够清晰
- 本节目标：
   ✔ 在动画播放到某个时间点时触发事件（用于延迟生成火球）

------

## **二、使用 Anim Notify 触发 Gameplay Event**

### **1. 为什么需要自定义 Notify？**

- 普通 Anim Notify 只能标记时间点，功能有限
- 需求：触发 Gameplay Event（带 Tag 和可选数据） → 供 Ability 监听

### **2. 等待事件：Wait Gameplay Event**

- 在 Play Montage and Wait 之后添加 **Wait Gameplay Event** 节点
- 作用：等待特定 Gameplay Tag 的事件传入
- 事件通过 Gameplay Ability System 发出并被监听

------

## **三、创建 Gameplay Tag 用于识别事件**

- 位置：Project Settings → Gameplay Tags

- 新建 Tag：

  ```
  Event.Montage.Firebolt
  ```

- 用来标识“从蒙太奇中发射火球”的事件

------

## **四、自定义 Anim Notify 类发送事件**

### **1. Blueprint 类创建**

- 新建 Blueprint → 继承 **AnimNotify**
- 命名示例：`AN_MontageEvent`

### **2. 重写函数**

- 重写：`Received_Notify`
- 在此函数内发送事件：
  - 获取角色：`GetOwner()`
  - 调用：**Send Gameplay Event to Actor**
  - 参数：
    - Target Actor
    - Gameplay Tag（通过变量传入）
    - Payload（可选，当前不使用）

### **3. 暴露变量**

- 创建变量 `EventTag`（类型：GameplayTag）
- 勾选“Editable”，可在 Montage 中设置具体 Tag

------

## **五、在动画 Montage 中使用 Notify**

- 打开施法动画 Montage
- 在时间线上右键 → Add Notify → 选择自定义 Notify（MontageEvent）
- 在右侧 Details 面板中将 Tag 设置为：`Event.Montage.Firebolt`

------

## **六、触发与验证**

- Wait Gameplay Event 节点设置监听同一 Tag
- 运行 Ability → 当播放到 Notify 点时：
   ✔ 事件被发送
   ✔ Ability 收到 → 执行 Event Received 输出
   ✔ 可 Print 字符串测试

------

## **七、下一步目标**

- 将火球生成逻辑从 C++ 中移至事件触发处
- 实现“到动画关键帧后再生成火球”
- 下一视频开始修改 AuraProjectileSpell 的逻辑

------

需要我继续总结下一段，或者整合成文本文件也可以告诉我！