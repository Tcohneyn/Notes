# âœ…ã€æ ‡é¢˜å¤§çº²å¼æ€»ç»“ï½œGameplay Abilityï¼šPlay Montage and Wait æ·±å…¥è§£æã€‘

------

### ä¸€ã€å‰ç½®æ¦‚å¿µä¸ä»»åŠ¡æœºåˆ¶

- **Gameplay Ability Firebolt ç°çŠ¶**ï¼š
   å½“å‰åŠŸèƒ½ä»…åœ¨é¼ æ ‡æ‚¬åœæ•Œäººæ—¶ç‚¹å‡»å·¦é”®å‘å°„ Fireboltï¼ŒåŠŸèƒ½è¿‡äºåŸºç¡€ã€‚
- **Ability Task æ¦‚å¿µ**ï¼š
  - Ability å†…çš„â€œå·¥ä½œå•å…ƒâ€ï¼ˆWorkerï¼‰ï¼Œç”¨äºæ‰§è¡Œå³æ—¶æˆ–è·¨æ—¶é—´çš„æ“ä½œã€‚
  - å¯å¤ç”¨å·²æœ‰ä»»åŠ¡æˆ–è‡ªå®šä¹‰ä»»åŠ¡ã€‚

------

### äºŒã€Blueprint ä¸­çš„ Latent Nodeï¼ˆå¼‚æ­¥ä»»åŠ¡èŠ‚ç‚¹ï¼‰

- **Play Montage èŠ‚ç‚¹ä»‹ç»**ï¼š
   å±äº Animation ç±»çš„å¼‚æ­¥èŠ‚ç‚¹ï¼ˆAsync Taskï¼‰ã€‚
  - å¯å“åº”å¤šç§äº‹ä»¶è¾“å‡ºï¼š
    - `OnCompleted`ï¼šæ’­æ”¾ç»“æŸã€‚
    - `OnBlendOut`ï¼šåŠ¨ç”»å¼€å§‹æ·¡å‡ºæ—¶ï¼ˆæœªè¢«æ‰“æ–­ï¼‰ã€‚
    - `OnInterrupted` / `OnCancelled`ï¼šä¸­æ–­æˆ–å–æ¶ˆæ—¶è§¦å‘ã€‚
    - `OnNotifyBegin / OnNotifyEnd`ï¼šMontage å†…è®¾ç½®çš„é€šçŸ¥è§¦å‘ã€‚
- **æ™®é€š Play Montage vs AbilityTask ç‰ˆå·®å¼‚**ï¼š
  - GAS ç‰ˆï¼ˆAbility Taskï¼‰é›†æˆæ›´æ·±ï¼Œèƒ½ä¸ Gameplay Ability ç³»ç»Ÿäº¤äº’ã€‚
  - Blueprint ç‰ˆæ˜¯ä¸€èˆ¬å¼‚æ­¥èŠ‚ç‚¹ï¼ŒGAS ç‰ˆæ˜¯ä¸“å±ä»»åŠ¡èŠ‚ç‚¹ã€‚

------

### ä¸‰ã€Play Montage and Wait å®é™…ä½¿ç”¨

- **åˆ›å»º Montage æµç¨‹**ï¼š
  - ä»åŠ¨ç”»èµ„æºåˆ›å»º Anim Montageï¼ˆä¾‹ï¼š`AM_Cast_Firebolt`ï¼‰ã€‚
  - ç¡®è®¤ Animation Blueprint ä½¿ç”¨ Default Slotã€‚
- **èŠ‚ç‚¹æ‰§è¡Œé€»è¾‘**ï¼š
  - ä¸»æ‰§è¡Œè„šæœ¬çº¿ç«‹å³è¾“å‡ºï¼ˆæ‰“å° â€œCasting Fireboltâ€ï¼‰ã€‚
  - åç»­å¼‚æ­¥è¾“å‡ºæ ¹æ®åŠ¨ç”»äº‹ä»¶å¼‚æ­¥è§¦å‘ã€‚
- **Blend å‚æ•°è°ƒæ•´**ï¼š
  - `Blend In = 0`ï¼Œ`Blend Out = 0.1`ï¼Œæé«˜å“åº”é€Ÿåº¦ã€‚
  - Blend In è¶Šå°ï¼ŒåŠ¨ç”»è¶Šâ€œåˆ©è½â€ã€‚

------

### å››ã€å¼‚æ­¥å›è°ƒäº‹ä»¶éªŒè¯

- **æµ‹è¯•ç»“æœ**ï¼š
  - æ‰§è¡Œåä¾æ¬¡è¾“å‡º `OnBlendOut` â†’ `OnCompleted`ã€‚
  - è¯´æ˜ï¼šMontage æ·¡å‡ºåå®Œæˆæ’­æ”¾ï¼›æœªè§¦å‘ä¸­æ–­æˆ–å–æ¶ˆã€‚
- **ä¼˜ç‚¹**ï¼š
   æ— éœ€æ‰‹åŠ¨è®¡æ—¶å™¨ï¼Œå¯è‡ªç„¶åŸºäºåŠ¨ç”»æ—¶é•¿è§¦å‘é€»è¾‘ã€‚

------

### äº”ã€Play Montage and Wait çš„åº•å±‚åŸç†

- **UAbilityTask_PlayMontageAndWait**ï¼š
  - ç»§æ‰¿è‡ª `UAbilityTask`ã€‚
  - å«å››ä¸ª BlueprintAssignable å§”æ‰˜ï¼ˆOnCompletedã€OnBlendOutã€OnInterruptedã€OnCancelledï¼‰ã€‚
- **é™æ€å‡½æ•°ç»“æ„**ï¼š
  - `CreatePlayMontageAndWaitProxy()`
  - BlueprintCallable + DefaultToSelf(OwningAbility) + HidePin â†’ ç”Ÿæˆå¼‚æ­¥ä»»åŠ¡èŠ‚ç‚¹ã€‚
  - å®é™…åˆ›å»º AbilityTask å®ä¾‹å¹¶è¿”å›ç»™è“å›¾ã€‚
- **Activate() æ‰§è¡Œé€»è¾‘**ï¼š
  - è°ƒç”¨ AbilitySystemComponent çš„ `PlayMontage()`ã€‚
  - ç»‘å®šå§”æ‰˜å›è°ƒï¼ˆOnMontageBlendingOut / OnMontageEnded ç­‰ï¼‰ã€‚
  - å›è°ƒä¸­å¹¿æ’­å„ç±»äº‹ä»¶ç»™ Blueprintã€‚

------

### å…­ã€è¿è¡Œæ—¶äº¤äº’é€»è¾‘

- **AbilityTask çš„æ ¸å¿ƒè¦ç´ **ï¼š
  - æœ‰ `Activate()` ç”Ÿå‘½å‘¨æœŸã€‚
  - ç»‘å®šåŠ¨ç”»å®ä¾‹ï¼ˆAnimInstanceï¼‰ã€‚
  - åˆ©ç”¨ Delegate å›è°ƒè¿›è¡Œäº‹ä»¶å¹¿æ’­ã€‚
- **åº•å±‚æ‰§è¡Œé“¾è·¯**ï¼š
  1. Blueprint è°ƒç”¨ AbilityTask èŠ‚ç‚¹ â†’
  2. C++ é™æ€å‡½æ•°åˆ›å»ºä»»åŠ¡å®ä¾‹ â†’
  3. ç»‘å®šåˆ° ASC â†’
  4. æ’­æ”¾ Montage â†’
  5. Delegate äº‹ä»¶è§¦å‘åå¹¿æ’­ Blueprint è¾“å‡ºç«¯å£ã€‚

------

### ä¸ƒã€æ„ä¹‰ä¸æ‰©å±•æ–¹å‘

- **æ ¸å¿ƒç†è§£**ï¼š
   Ability Task = â€œå¼‚æ­¥è“å›¾èŠ‚ç‚¹çš„ C++ å®ç°æ¨¡æ¿â€ã€‚
- **Play Montage and Wait çš„ä½œç”¨**ï¼š
  - æ–¹ä¾¿åœ¨èƒ½åŠ›ä¸­æ’­æ”¾åŠ¨ç”»å¹¶ç­‰å¾…çŠ¶æ€å˜åŒ–ã€‚
  - å¯æ‰©å±•ä¸ºè‡ªå®šä¹‰å¼‚æ­¥ä»»åŠ¡ï¼ˆå¦‚ç›‘å¬ç‰¹å®š Notifyã€ç­‰å¾…è‡ªå®šä¹‰äº‹ä»¶ï¼‰ã€‚
- **ä¸‹ä¸€èŠ‚é¢„å‘Š**ï¼š
   å°†å­¦ä¹ å¦‚ä½•åœ¨ Montage ä¸­ç­‰å¾…ç‰¹å®šæ—¶é—´ç‚¹ï¼ˆä¾‹å¦‚åŠ¨ç”»åˆ°è¾¾æ–½æ³•åŠ¨ä½œä¸­æ®µæ—¶å†ç”ŸæˆæŠ•å°„ç‰©ï¼‰ã€‚

------

ğŸ“˜ **æ€»ç»“å…³é”®è¯**ï¼š
 `AbilityTask`ï¼`PlayMontageAndWait`ï¼`Delegate`ï¼`Latent Node`ï¼`Async Task`ï¼`Activate()`ï¼`BlendOut`ï¼`Completed`ï¼`C++ Factory Function`