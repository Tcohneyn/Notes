# 使用 HUD 管理 Overlay Widget

## 1. 移除测试用的 Level Blueprint 逻辑

- 之前在 **Level Blueprint** 里创建并添加了血量球和法力球到屏幕。
- 这是临时测试方法，不适合最终架构。
- 删除 Level Blueprint 中的相关逻辑。

## 2. 使用 HUD 作为 Overlay 的承载位置

- **HUD Class** 适合用于绘制 UI（如 Overlay Widget）。
- 计划在 HUD 中创建并管理 Overlay Widget。

## 3. 创建 AuraHUD C++ 类

1. 在 `UI` 目录下新建 **HUD 文件夹**。
2. 创建 C++ 类：
   - 基类：`AHUD`。
   - 命名：`AuraHUD`。
3. 编辑器关闭保存后，Rider 会生成 `AuraHUD.h` 和 `AuraHUD.cpp`。

## 4. 在 AuraHUD 中添加变量

- **Overlay Widget 实例变量**：
  - 类型：`UOraUserWidget*`（TObjectPtr）。
  - 存储创建后的 Overlay Widget。
- **Overlay Widget 类变量**：
  - 类型：`TSubclassOf<UOraUserWidget>`。
  - 属性：`EditAnywhere`，方便在蓝图中设置。

## 5. 在 BeginPlay 中创建 Overlay

1. 重写 `BeginPlay()`。
2. 使用 `CreateWidget<UUserWidget>(World, OverlayWidgetClass)` 创建 Overlay。
3. 调用 `AddToViewport()` 将其绘制到屏幕。
4. 注意后续会涉及 **Widget Controller**，目前仅用于显示测试。

## 6. 在蓝图中配置 HUD

1. 基于 C++ 类 **AuraHUD** 创建蓝图：
   - 命名：`BP_AuraHUD`。
   - 位置：`UI/HUD` 文件夹。
2. 在 `BP_AuraHUD` 中设置 **Overlay Widget Class** = `WBP_Overlay`。
3. 在 **Game Mode 蓝图** 中设置：
   - 默认 HUD Class = `BP_AuraHUD`。

## 7. 验证效果

- 编译运行后，Overlay Widget 能够自动加载并显示在屏幕。
- 后续可在 HUD 中控制 Overlay 的逻辑。

## 8. 补充：角色 Idle 动画修复

- 发现 Aura 的待机动画只播放一次不循环。
- 打开 `AnimBlueprint`，找到 Idle 动画，勾选 **Loop Animation**。
- 重新运行后，Idle 动画正常循环。

## 9. 下一步

- 准备在 HUD 中给 Overlay Widget 绑定 **Widget Controller**，驱动动态数值（例如血量/法力百分比）。

