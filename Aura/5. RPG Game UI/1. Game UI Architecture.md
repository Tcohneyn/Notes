# UI 架构与 Widget 控制器设计

## 1. UI 的基本概念

- 游戏中存在生命值（Health）等属性，需要显示在屏幕上。
- 显示在屏幕上的对象称为 **Widget**。
- 在 Unreal 中通过 **Widget Blueprint** 来实现可视化表现。

## 2. Widget 与数据的关系

- Widget 必须接收数据才能正确显示（例如：血条需要知道当前生命值）。
- 游戏中有多处数据来源：
  - **Attribute Set**（角色属性数据）
  - **Player State**（玩家状态数据）
  - 其他类中也可能包含需要显示的数据。

## 3. 数据获取的挑战

- Widget 可以直接去获取指针和引用访问数据，但这样耦合度太高。
- 随着项目复杂度增加，必须考虑如何以更优雅的方式传递数据。

## 4. MVC 架构思想引入

- 在良好的架构中，存在 **关注点分离**：
  1. **View（视图）**：血条、技能图标等 Widget（负责显示）。
  2. **Model（模型）**：游戏逻辑数据（生命、等级、经验、技能解锁等）。
  3. **Controller（控制器）**：负责获取 Model 的数据并传递给 View。

## 5. Widget Controller 的作用

- 中间层：从 Model 中检索数据并广播给 View。
- 处理计算、算法逻辑。
- 负责响应用户交互（按钮点击 → 修改 Model 数据）。
- 在本项目中称为 **Widget Controller**。

## 6. MVC 架构的优点

- 高度模块化，避免硬编码依赖。
- **Model** 不依赖 Widget 或 Controller。
- **Controller** 依赖 Model，但不依赖具体 Widget 类型。
- **View** 依赖 Controller，但可以随时更换而无需改动底层逻辑。
- 提高可扩展性和灵活性。

## 7. 项目中的具体实现计划

- 创建自定义基类 **UAuraUserWidget**（继承自 UUserWidget）。
- 创建 **UAuraWidgetController** 作为中间层。
- 创建自定义 HUD，用于生成和初始化 Widget 与 Controller。
- 构建系统后：
  - Controller 采集并广播数据。
  - Widget 接收并展示（例如：血条、蓝条）。

## 8. 下一步任务

- 搭建整体 UI 架构：UAuraUserWidget + UAuraWidgetController + 自定义 HUD。
- 完成后即可在游戏中实时显示生命值和魔力值。