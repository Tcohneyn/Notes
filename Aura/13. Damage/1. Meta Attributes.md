## **🎯 Meta 属性与伤害系统机制（本段字幕大纲）**

### **1. 当前问题：直接修改 Health 的局限**

- Gameplay Effect 目前直接更改 Attribute Set 中的 Health 值。
- 在复杂 RPG/GAS 系统中，这种方式不适合处理多步计算。

------

### **2. 引入 Meta Attribute 的必要性**

- 伤害计算需要同时依赖攻击者与受击者多种属性。
- 为简化数学计算流程，引入“中介属性（Meta Attribute）”。

------

### **3. Meta Attribute 与普通 Attribute 的区别**

- **普通 Attribute：可复制（Replicated），对客户端可见。**
- **Meta Attribute：不复制，仅在服务器用于临时计算。**
- 不直接用于 UI 或数值展示。

------

### **4. 以 IncomingDamage 为例的伤害流程**

#### **4.1 Gameplay Effect 应用阶段**

- GE 不直接扣除 Health。
- GE 将伤害值写入 meta attribute：`IncomingDamage += DamageValue`。

#### **4.2 Attribute Set 响应改变**

- 使用 `PostGameplayEffectExecute` 监听 IncomingDamage。
- 当 IncomingDamage 变化时，执行完整伤害计算流程：
  - 是否格挡（Block Chance）
  - 是否暴击（Critical）
  - 智力或力量加成（魔法伤害/物理伤害）
  - 其他伤害放大或减免逻辑

------

### **5. 计算最终伤害并应用**

- 计算出最终伤害 FinalDamage。
- 从真实的 Health 中扣除：`Health -= FinalDamage`。
- **Meta Attribute 在使用后被清零**（已被“消费”）。

------

### **6. 附加逻辑：受击反馈与特效**

- 根据伤害类型显示浮动伤害数字（颜色不同）。
- 触发额外状态：
  - 火焰 → 灼烧
  - 雷电 → 眩晕
- 其他可定制的受击反应。

------

### **7. 结论：GAS 中伤害处理的标准方式**

- 通过 meta attributes 作为伤害计算中转值。
- 最终由 Attribute Set 决定实际扣血流程。
- 项目将采用此方式实现伤害系统。

