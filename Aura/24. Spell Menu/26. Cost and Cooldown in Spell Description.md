这份视频教程（第26集）主要讲解了如何进一步完善技能菜单的富文本描述，通过 C++ 代码动态提取 **魔法消耗（Mana Cost）** 和 **冷却时间（Cooldown）** 的数值，并将其集成到 UI 的文字显示中。

以下是该段视频全部内容的标题大纲式详细总结：

### 一、 教学目标与背景 (Objective & Background)

- **回顾现状**：目前技能描述已能显示名称、等级和伤害。
- **新目标**：利用富文本数据资产中定义的更多样式（如蓝色表示法力值），在描述中加入该技能在当前等级和下一等级的“法力消耗”与“冷却秒数”。
- **技术核心**：在 Gameplay Ability (GA) 中编写通用函数，用于解析与其关联的 Gameplay Effect (GE) 以提取具体数值。

### 二、 技术原理：从 Gameplay Effect 提取数值 (Logic: Extracting Values from GE)

- **底层机制**：在虚幻引擎 GAS 中，消耗和冷却通常是由 GE 定义的。
- **挑战点**：数值通常存储在 GE 的修改器（Modifiers）或持续时间（Duration）中，且往往是随等级变化的曲线数值（Scalable Float）。
- **核心 API**：利用 `GetStaticMagnitudeIfPossible(InLevel, OutMagnitude)` 函数从 GE 类中静态获取特定等级的数值。

### 三、 C++ 层级实现：`AuraGameplayAbility` 基类扩展

- **新增函数定义**：
  1. **`GetManaCost(float InLevel)`**：
     - 遍历 `CostGameplayEffectClass` 的所有修改器（Modifiers）。
     - 查找目标属性为“法力值（Mana）”的修改器。
     - 提取并返回该等级下的消耗值。
  2. **`GetCooldown(float InLevel)`**：
     - 访问 `CooldownGameplayEffectClass`。
     - 提取其持续时间（Duration）的幅度（Magnitude）数值并返回。
- **健壮性处理**：在代码中加入空指针检查，防止因技能未设置消耗或冷却 GE 而导致崩溃。

### 四、 子类逻辑更新：`AuraProjectileSpell` (以火球术为例)

- **更新描述函数**：修改 `GetDescription` 和 `GetNextLevelDescription` 的重写逻辑。
- **格式化字符串拼接**：
  - 调用基类的 `GetManaCost` 和 `GetCooldown`。
  - 使用富文本标签构建字符串，例如：
    - `<ManaCost>法力消耗: </><Blue>%d</>`
    - `<Cooldown>冷却时间: </><Stats>%.1f 秒</>`
- **下级预览动态化**：确保“下一等级”描述正确调用 `Level + 1` 的数值，让玩家清楚看到升级带来的消耗降低或冷却缩减。

### 五、 UI 样式与富文本应用 (Rich Text Formatting)

- **颜色与样式匹配**：
  - 使用蓝色（Blue）表示法力消耗。
  - 使用特定样式（如 Stats 或 Cooldown）使数值在视觉上与普通文本区分。
- **排版优化**：通过 `\n`（换行符）将名称、基础描述、消耗、冷却和等级信息清晰地分行显示。

### 六、 成果演示与测试 (Testing & Final Polish)

- **实时更新验证**：
  - 打开技能菜单，点击“火球术”，观察描述信息是否正确显示。
  - **升级测试**：点击加点升级技能，确认描述中的消耗和冷却数值随等级实时刷新。
- **通用性验证**：展示该套系统如何只需一次编写，即可通过继承自动适配未来所有的主动技能。

------

**核心总结：**

本集通过深入 GAS 底层提取 GE 数值，实现了**技能描述数据的高度自动化**。开发者无需在文本中硬编码数值，UI 会根据 C++ 后台的技能数据（Scalable Floats）自动生成最准确的格式化说明，极大地降低了后续数值调整和技能制作的维护成本。