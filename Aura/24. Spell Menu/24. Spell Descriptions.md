这份视频教程（第23集）主要讲解了如何在 C++ 中为技能基类添加描述功能，并通过 **Ability System Component (ASC)** 和 **Widget Controller** 将这些动态生成的文本传递给 UI 界面。

以下是内容的全部标题大纲式中文详细总结：

### 一、 核心思路：将描述功能收归技能类

- **设计原则：** 技能描述应作为技能类（`AuraGameplayAbility`）本身的一种属性。
- **虚函数设计：** 在基类中定义 `GetDescription` 和 `GetNextLevelDescription` 虚函数，允许子类（如火球术、电击术）根据等级动态重写描述内容。
- **数据类型选择：** 使用 `FString` 方便进行字符串拼接和格式化。

### 二、 C++ 层级实现：`AuraGameplayAbility`

- **功能函数：**
  1. **`GetDescription(int32 Level)` (Virtual):** 返回当前等级的描述。
  2. **`GetNextLevelDescription(int32 Level)` (Virtual):** 返回下一等级的预览描述。
  3. **`GetLockedDescription(int32 Level)` (Static):** 静态函数，返回“该技能在 X 级解锁”的通用提示。
- **格式化语法：** 利用 `FString::Printf` 配合上一集定义的富文本标签（如 `<Default>`、`<Level>`）构建带样式的字符串。

### 三、 逻辑中转：在 ASC 中根据标签获取描述

- **新函数：** `GetDescriptionsByAbilityTag`。
- **处理逻辑：**
  - **状态判断：** 尝试根据 `AbilityTag` 查找技能规格（Spec）。
  - **未解锁情况：** 如果找不到 Spec，从 `AbilityInfo` 数据资产中获取等级需求，调用静态的 `GetLockedDescription`。
  - **已解锁情况：** 获取技能实例并将其转换为 `UAuraGameplayAbility`，调用其虚函数获取实时描述内容（包括当前级和下一级）。

### 四、 通讯更新：Widget Controller 的数据广播

- **委托（Delegate）升级：** 修改 `FSpellGlobeSelectedSignature` 委托，增加两个 `FString` 参数（描述和下一级描述）。

- **触发时机：** 1.  当玩家**选中**某个技能球时。

  \2.  当技能**状态改变**或玩家**技能点改变**（影响按钮状态）时。

- **实现细节：** Widget Controller 调用 ASC 的获取函数，并将得到的字符串随同布尔值（是否可升级等）一并广播给 UI。

### 五、 UI 表现优化：富文本与自动换行

- **蓝图绑定：** 在技能菜单蓝图中，通过“选中技能球”事件接收这两个字符串。
- **组件设置：**
  - 调用富文本块的 `SetText` 函数。
  - **关键设置：** 勾选 **“Auto Wrap Text”（自动换行）**，确保长段描述文本（如 Lorem Ipsum 测试文本）能正确适配滚动框宽度。

### 六、 测试与验证

- **测试内容：**
  - **已拥有技能：** 选中火球术，正确显示测试文本及当前/下一等级数字，且支持滚动。
  - **锁定技能：** 选中尚未达标的技能，显示“Spell locked until level X”。
- **结论：** 系统成功实现了数据（C++）到视觉（UMG Rich Text）的完整链路。

------

**技术关键点：** * 灵活运用 `FString::Printf` 处理富文本标签。

- 区分静态函数（处理锁定状态）和虚函数（处理动态等级数据）。
- 通过修改委托签名实现多维数据的一次性同步。