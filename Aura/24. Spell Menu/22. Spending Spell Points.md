这份视频教程（第22集）主要讲解了如何让技能菜单中的**“花费技能点（Spend Point）”**按钮真正发挥作用，实现技能的解锁与升级。

以下是内容的全部标题大纲式中文详细总结：

### 一、 核心目标：实现技能点的消耗功能

- **功能需求：** 当玩家选中一个技能球且拥有足够的“技能点”时，点击“花费点数”按钮应能提升技能等级或解锁新技能。
- **交互逻辑：** 按钮的启用状态由技能状态（是否符合条件）和玩家剩余点数共同决定。

### 二、 架构设计：从 UI 到后端的通讯流程

- **通讯链路：** 1.  玩家点击 UI 按钮。

  \2.  UI 调用 **Widget Controller** 的函数。

  \3.  Widget Controller 通过 **Ability System Component (ASC)** 向服务器发送请求。

  \4.  服务器执行逻辑并广播结果，UI 接收广播并刷新。

### 三、 后端核心实现：ASC 中的 `SpendPoint` 函数

- **函数职责：** 在 `AuraAbilitySystemComponent` 中创建一个服务端函数，负责具体的逻辑处理。
- **寻找技能：** 函数接收一个 `AbilityTag`，在玩家拥有的技能规格（ActivatableAbilities）中查找对应的技能实例。
- **校验机制：** 在服务端再次验证玩家是否真的拥有足够的技能点，确保数据安全。

### 四、 升级逻辑的分支处理

- **情况 A：从“符合条件（Eligible）”变为“已解锁（Unlocked）”：**
  - 如果技能尚未学习，系统会将该技能的状态标签从 Eligible 更改为 Unlocked。
  - 此时技能等级提升至 1。
- **情况 B：提升现有技能等级：**
  - 如果技能已经解锁，再次点击“花费点数”会直接增加该技能的 Level 字段。
  - 同步更新玩家的技能点总数（点数减 1）。

### 五、 广播机制与 UI 实时刷新

- **状态同步：** 一旦服务端修改了技能等级或状态标签，必须通过委托（Delegates）广播给客户端。
- **数据刷新：** * `AbilityInfo` 委托会广播最新的技能状态。
  - `AttributeChange` 委托会更新界面上的点数余额。
  - 技能球的视觉表现（如从灰色变彩色）和描述信息中的等级数字会立即更新。

### 六、 实际演示与效果验证

- **升级测试：** 演示了玩家通过“升级”获得点数后，打开菜单点击“花费点数”的过程。
- **数值验证：** * 以“火球术（Firebolt）”为例，展示了升级后技能等级从 1 升至 2。
  - 进入战斗测试，确认由于等级提升，火球术造成的实际伤害数值有所增加。

### 七、 总结与后续预告

- **当前成果：** 玩家现在可以自主决定技能的成长路径。
- **下一步：** 既然技能已经解锁，下一步将处理如何将这些技能**“装备（Equip）”**到具体的快捷栏位中。

------

**技术关键点：** 视频强调了在能力系统（GAS）中，技能等级（Level）的改变必须在服务端进行，并通过 `MarkAbilitySpecDirty` 等机制确保客户端能接收到属性同步。