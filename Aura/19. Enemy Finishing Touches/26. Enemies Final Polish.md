这段视频是关于虚幻引擎（Unreal Engine）敌人系统开发的阶段性总结与性能优化。视频通过修复 Bug、排查内存泄漏以及代码重构，为接下来的等级系统奠定了基础。

以下是详细的标题大纲式总结：

### 一、 弹道角度修复与逻辑重构 [00:00 - 02:02]

- **问题诊断**：萨满发射的火球（Firebolt）角度偏高。
- **原因分析**：火球继承自远程攻击基类，而基类中硬编码了弹弓石块所需的 25 度俯仰角覆盖（Pitch Override）。
- **解决方案**：
  - 将 `bShouldOverridePitch` 和 `PitchOverride` 提升为变量并暴露（Eye Icon）。
  - 在火球子类的类默认值（Class Defaults）中关闭俯仰角覆盖，使火球恢复水平直线飞行。

### 二、 内存泄漏排查与 FPS 性能优化 [02:02 - 11:45]

- **压力测试**：通过在场景中放置大量远程小鬼（Demon Ranger）观察帧率（FPS）。
- **发现问题**：FPS 不是维持在一个低位基准，而是随着攻击持续不断下降（从 120 掉到 10 以下），这表现出典型的**内存泄漏**特征。
- **深层原因排查**：
  1. **投掷物生成过量**：通过 C++ 日志发现每个攻击动作触发了多个事件，导致一次投掷生成多块石头。修复方法：在蓝图中勾选 `WaitGameplayEvent` 的 **Only Trigger Once**。
  2. **粒子系统失控**：发现 Niagara 粒子系统中的 `Slingshot Impact` 存在“无限存活（Infinity）”标志。
- **最终修复**：在粒子系统中勾选 **Kill Particles when Lifetime has elapsed**。修复后，FPS 在高负载下能稳定在 90-120 之间，不再持续衰减。

### 三、 修复 GAS 框架中的 C++ 错误日志 [11:45 - 14:40]

- **报错内容**：`getMagnitude` 调用时提示数据尚未设置（Magnitude had not yet been set by caller）。
- **原因分析**：在 `ExecCalc_Damage` 中遍历所有伤害类型时，系统会尝试获取每种类型的强度。如果某个效果（如物理伤害的石头）不包含某种元素属性，GAS 会抛出警告日志。
- **代码修正**：
  - 修改 `GetSetByCallerMagnitude` 函数调用，将可选参数 `bWarnIfNotFound` 设置为 **false**。
  - 这样在找不到特定伤害标签时，系统会默认返回 0 而不再向输出日志抛红。

### 四、 性能极限评估（Stress Test） [14:40 - 18:11]

- **萨满召唤压力测试**：同时放置多个萨满，观察它们不断召唤随从后的性能表现。
- **结论**：明确了当前硬件下的“渲染预算（Budget）”。虽然大量单位会导致 FPS 下降，但只要数值保持稳定不下滑，即证明系统逻辑是健康的。
- **视觉规范**：再次检查所有火球和爆炸特效的粒子轨道，确保没有被遗漏的“无限存活”设置。

### 五、 全课阶段性回顾与后续展望 [18:11 - 19:42]

- **当前成果**：敌人已具备复杂的 AI 行为（攻击、躲避、召唤随从、Q 弹的出场补间动画）。
- **下阶段计划：等级系统（Level Up System）**：
  1. **经验值（XP）**：击杀敌人获取经验，更新 UI 经验条。
  2. **属性加点**：升级后获得点数，可用于强化主属性（Primary Attributes）。
  3. **技能升级**：通过技能菜单（Spell Menu）分配技能点，改变技能表现（如 1 级发 1 个火球，高级后一次发多个）。

------

核心总结：

本视频通过严谨的测试流程展示了如何区分“性能差”和“内存泄漏”。关键修复点在于控制 GameplayEvent 的触发次数以及强制销毁生命周期结束的粒子。