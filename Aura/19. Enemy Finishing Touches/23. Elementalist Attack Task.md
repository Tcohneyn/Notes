这段视频主要讲解了如何通过 **AI 行为树（Behavior Tree）** 和 **战斗接口（Combat Interface）** 实现萨满敌人的智能决策：在随从数量较少时优先召唤随从，否则进行火球攻击。

以下是详细的标题大纲总结：

### 一、 定制行为树攻击任务 [00:00 - 01:22]

- **任务复制与重命名**：将通用的 `BTTask_Attack` 复制并命名为 `BTTask_Attack_Elementalist`，专门用于处理萨满及其变体的攻击逻辑。
- **逻辑目标**：在激活技能前加入判断条件，检查当前随从数量，从而动态决定激活“召唤”还是“攻击”标签。

### 二、 逻辑变量配置与清理 [01:22 - 02:30]

- **新增 Gameplay Tags 变量**：
  - **Summon Tag**：默认设为 `Abilities.Summon`。
  - **Ability Tag**：用于存储最终选择要激活的标签。
- **蓝图整洁度优化**：
  - 将 `ControlledPawn`（受控角色）引脚提升为局部变量，避免连线交错导致蓝图混乱。

### 三、 实现随从数量检测逻辑 [02:30 - 04:50]

- **获取随从计数**：通过 `Combat Interface` 接口调用 `Get Minion Count` 函数。
- **设置阈值（Threshold）**：
  - 引入变量 `MinionSpawnThreshold`（默认为 2）。
- **分支判断（Branch）**：
  - **True (数量 < 阈值)**：将 `Ability Tag` 设置为 `Summon Tag`。
  - **False (数量 >= 阈值)**：将 `Ability Tag` 设置为原本的 `Attack Tag`。
- **动态激活**：将最终生成的 `Ability Tag` 接入 `Try Activate Abilities by Tag` 节点。

### 四、 C++ 战斗接口扩展：增减随从数 [04:50 - 08:45]

- **接口定义**：在 `CombatInterface` 中新增 `IncrementMinionCount(int32 Amount)` 函数。
- **基类实现**：在 `AuraCharacterBase` 中重写该函数。
  - **功能**：通过 `Amount` 参数实现增减。传入正值增加数量，传入负值减少数量（这种做法虽然引起了一些关于命名规范的讨论，但保证了函数的通用性）。
- **技术决策**：不单独创建 `Decrement` 函数，而是通过传入负数来复用逻辑。

### 五、 技能系统与生成逻辑集成 [08:45 - 13:40]

- **自动计数**：在 `Summon Ability` 蓝图中，每当 `SpawnActor` 成功生成一个随从，就调用 `IncrementMinionCount` 并传入 **+1**。
- **行为树替换**：在萨满的行为树中，将旧的攻击节点替换为 `BT_Attack_Elementalist`，并确保 `Combat Target Selector` 配置正确。
- **修复生成 Bug**：修复了因代码重构导致的随从生成位置偏移问题，确保随从在指定的 Spawn Location 索引位置生成。

### 六、 成果演示与遗留问题 [13:40 - 14:11]

- **表现验证**：测试发现萨满首先会施法召唤随从，待随从满员（超过阈值）后，会自动切换为发射火球攻击玩家。
- **待解决问题**：目前的随从计数“只增不减”，当随从被玩家杀死时，计数器没有更新。
- **下步计划**：实现随从死亡时通知主人，从而减少计数器，让萨满能够补充新兵。

------

**建议后续操作：**

- 询问如何通过 `Gameplay Message Router` 或委托（Delegate）来实现随从死亡通知主人的逻辑。
- 了解如何在蓝图中安全地使用 `Negative Values`（负值）来执行减法操作。