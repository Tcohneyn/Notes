这段视频字幕详细介绍了在虚幻引擎（GAS 框架）中，如何创建一个**被动技能（Passive Ability）\**来持续监听\**经验值（XP）相关的 Gameplay Event**，并将其应用到属性集中。

以下是按标题大纲形式进行的中文详细总结：

### 一、 创建监听被动技能 (Creating the Listening Ability) [00:00 - 01:59]

- **技能定位**：创建一个名为 `GA_ListenForEvents` 的特殊被动技能，用于在后台持续运行。
- **优化设置**：
  - **实例化策略（Instancing Policy）**：设置为 **Instance Per Actor**，确保每个角色只有一个实例。
  - **运行环境（Net Policy）**：设置为 **Server Only**（仅服务器运行），因为它只负责服务器端的数据处理，无需同步到客户端。
  - **复制策略（Replication Policy）**：设置为 **Do Not Replicate**（不复制）。

### 二、 实现事件监听逻辑 (Implementing Event Listening) [02:00 - 04:22]

- **核心节点**：使用 **Wait Gameplay Event** 节点。
- **标签匹配策略**：
  - **非精确匹配**：取消勾选 "Only Exact Match"，监听 `Attributes` 根标签下的所有子标签。
  - **持续触发**：确保不勾选 "Trigger Once"，使该技能在整个游戏过程中能多次响应经验值获取事件。
- **载荷处理（Payload）**：通过 Break Gameplay Event Data 获取事件传回的 **Tag（标签）** 和 **Magnitude（数值/幅度）**。

### 三、 创建基于事件的 Gameplay Effect (Event-Based GE) [05:01 - 06:29]

- **GE 定义**：创建 `GE_EventBasedEffect`。
- **属性修改器**：
  - **持续时间**：设置为 **Instant**（即时）。
  - **修改属性**：针对 `IncomingXP`（传入经验值）属性。
  - **幅度类型**：设置为 **Set By Caller**（由调用者设置），以便根据事件传回的具体 XP 数值进行动态修改。

### 四、 定义 Native Gameplay Tag (Defining Native Tag) [06:30 - 08:01]

- **新增标签**：在 C++ 中为元属性（Meta Attributes）新增标签。
- **标签路径**：`Attributes.Meta.IncomingXP`。
- **代码实现**：在 `GameplayTags.cpp` 中注册此标签，用于 Set By Caller 的匹配。

### 五、 完善技能蓝图逻辑 (Completing Ability Logic) [08:02 - 12:30]

- **效果应用流程**：
  1. 从 Actor Info 获取 **Ability System Component (ASC)**。
  2. 使用 `MakeOutgoingSpec` 创建 GE 的 Spec（规格）。
  3. 调用 **Assign Tag Set By Caller Magnitude**：将事件传回的 `Magnitude` 赋值给 GE Spec 中对应的 `EventTag`。
  4. 调用 **Apply Gameplay Effect Spec to Self**：将效果应用给自己。

### 六、 C++ 架构支持：自动启动被动技能 [12:31 - 16:39]

- **新增数组**：在 `AuraCharacterBase` 中添加 `StartupPassiveAbilities` 数组，用于存储需要在游戏开始时自动激活的被动技能。
- **ASC 扩展**：
  - 在 `AuraAbilitySystemComponent` 中新增 `AddCharacterPassiveAbilities` 函数。
  - **逻辑实现**：遍历被动技能数组，调用 `GiveAbilityAndActivateOnce`（赋予技能并立即激活一次）。
- **初始化调用**：在角色被 Possess（控制）时，调用此函数确保监听技能启动。

### 七、 编辑器配置与测试 (Configuration & Testing) [16:40 - 结束]

- **配置**：在 Aura 角色蓝图中，将 `GA_ListenForEvents` 添加到 `Startup Passive Abilities` 列表中。
- **验证**：通过在技能激活处添加 Print String（打印字符串）并运行游戏。
- **结果**：确认该技能仅在 **Server**（服务器端）成功激活并开始监听事件。

------

**核心技术点总结**：

1. **Wait Gameplay Event** 是 GAS 中实现异步逻辑监听的核心。
2. **Set By Caller** 允许在运行时将外部数值（如击杀奖励 XP）动态注入到 Gameplay Effect 中。
3. **被动技能自动激活架构**：通过扩展 C++ 基类，实现了在赋予技能的同时自动触发其 `ActivateAbility` 逻辑，确保监听器始终在线。