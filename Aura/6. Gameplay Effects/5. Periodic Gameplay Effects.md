## 总结（Periodic Gameplay Effects）

### 1. 回顾与引入

- Instant Effect：永久改变 **Base Value**。
- Duration / Infinite Effect：改变 **Current Value**，持续时间到/移除时恢复。
- Periodic Effect：基于 Duration 或 Infinite 的特殊形式，会周期性执行改变。
  - 每次周期的改变本质上是 **Instant Effect**（永久改 Base Value，不会撤销）。

------

### 2. Periodic 的实现机制

- 设置 **Period 属性** 为非零，即可将 Duration/Infinite 转换为 Periodic。
- 可配置：
  - **Execute Periodic Effect on Application**（应用时是否立刻执行一次）。
  - **Duration + Period** → 决定总执行次数。
- 注意：周期执行过快会影响性能（每次执行都走 AbilitySystem 流程），UI 平滑变化建议通过插值实现，而不是超高频率 Period。

------

### 3. 示例：Crystal Heal 改为 Periodic

- 原本：持续 2 秒，Max Health +100，结束后恢复。
- 改成 Periodic：
  - Period = 1s，改属性为 **Health**，+10。
  - 运行效果：2 秒内，每秒增加 10 → Health 从 50 → 60 → 70 → 80。
- 调整参数：
  - Period = 0.1s，+1 → 更平滑的回血。
  - Period = 0.01s，+0.1 → 超平滑回血，但效率差。
  - 建议折中：0.1s +1（十次/秒）。

------

### 4. 高级配置

- **Execute on Application**：
  - 勾选 → 应用时立即执行一次（会多加一次）。
  - 不勾选 → 等待一个周期才开始。
- **Periodic Inhibition Policy**：
  - 与 Gameplay Tags 配合，控制 Effect 被阻止时的行为。
- **Stacking Type**：
  - 多个相同 Gameplay Effect 叠加时的处理策略（此视频未展开）。

------

### 5. 练习任务：Mana Crystal

- 目标：做一个 **周期性回复法力的拾取物**。
- 实现步骤：
  1. 复制 Crystal Heal → 新建 `GE_CrystalMana`。
  2. 设置为 **Has Duration**，Period=0.1，Duration=3s。
  3. Modifier：对 **Mana** +1。
  4. 新建 `BP_ManaCrystal`（继承 AuraEffectActor），设置 Mesh & SphereCollision。
  5. Overlap 时调用 ApplyEffectToTarget，传入 `GE_CrystalMana`。
- 效果：拾取时，每 0.1 秒 +1 Mana，持续 3 秒。

------

### 6. 小结

- Instant → 永久修改 Base Value。
- Duration/Infinite → 临时修改 Current Value，可撤销。
- Periodic → 基于 Duration/Infinite，每周期永久修改 Base Value。
- 现在我们可以制作持续回血/回蓝类效果（HoT / Mana Regen）。

------

要不要我帮你把这三类（Instant / Duration / Periodic）效果整理成一张**对照表格**，让逻辑一目了然？