## 总结（Infinite Gameplay Effects & Policies）

### 1. 创建 Infinite Gameplay Effect

- 复制 Duration Gameplay Effect → 新建 **Infinite Gameplay Effect Class**。
- 在编辑器中创建对应的 **GE_FireArea**，设置：
  - **Duration Policy = Infinite**
  - **Periodic = 1s**
  - Modifier：Health -5（每秒扣血）。

------

### 2. Fire Area 蓝图示例

- 新建 `BP_FireArea`（继承 AuraEffectActor）。
- 添加组件：
  - Box Collision（触发范围）。
  - Niagara 火焰粒子系统（视觉效果）。
- 逻辑：
  - BeginOverlap → Apply Effect to Target → 施加 `GE_FireArea`。
  - Infinite Effect 不会自动移除 → 离开范围依然持续掉血。

------

### 3. 移除 Infinite Effect 的问题

- Duration/Periodic → 系统会自动到期清除。
- Infinite → **不会自动移除**，必须手动处理。
- 当前测试结果：离开火区后，血量仍不断下降 → 需要额外逻辑去移除。

------

### 4. 解决思路：C++ 中加入策略（Policies）

- **原因**：Infinite Effect 的应用/移除逻辑更复杂，用蓝图实现不直观。
- 新增两个枚举：
  - **Effect Application Policy**
    - Apply on Overlap
    - Apply on End Overlap
    - Do Not Apply（默认）
  - **Effect Removal Policy**
    - Remove on End Overlap
    - Do Not Remove（默认给 Infinite 设置为 Remove on End Overlap）。

------

### 5. 灵活配置

- 每类 Effect（Instant / Duration / Infinite）都可单独设置 **Application Policy**。
- Infinite Effect 可设置 **Removal Policy**。
- Blueprint 可以灵活配置这些选项。

------

### 6. 辅助变量与函数

- 新增布尔值：`bDestroyOnEffectRemoval`（是否在移除后销毁 Actor）。
- 新增函数：
  - `OnOverlap(AActor* TargetActor)`
  - `OnEndOverlap(AActor* TargetActor)`
  - 由蓝图调用，内部根据 **Policy** 决定是否应用或移除效果。

------

✅ **结论**

- Infinite Gameplay Effect 必须手动移除，否则会无限生效。
- 引入 **应用策略 / 移除策略 (Policies)**，让 Effect 的应用与移除方式灵活可控。
- 下一步：在 C++ 中实现这些策略的具体逻辑。

