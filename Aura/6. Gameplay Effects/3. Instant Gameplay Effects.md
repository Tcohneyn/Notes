# **Unreal Engine 5：使用Gameplay Effect实现可交互药水系统**

## 1. 准备与目标

- 创建函数 `ApplyEffectToTarget` 并设为 Blueprint Callable。
- 目的是让蓝图侧负责触发效果，而不再依赖 C++ 的重叠事件。

## 2. 在蓝图中调用函数

- 打开 `BP_HealthPotion` 蓝图。
- 在 `OnComponentBeginOverlap` 中调用 `ApplyEffectToTarget`。
- 传入 Actor 和 Gameplay Effect Class。

## 3. 创建 Gameplay Effect

- 在 `Blueprints/Actor/Potion` 下创建：
  - `G_Potion_Heal`（Instant Gameplay Effect）
- 配置：
  - Duration Policy: Instant
  - Modifier: Health +25
  - Chance to Apply: 100%
  - 不设置条件或额外执行逻辑。

## 4. 设置药水蓝图

- `BP_HealthPotion`：
  - 关联 `G_Potion_Heal`
  - 调用 `ApplyEffectToTarget` 时传入 `Other Actor`
  - 可选：Overlap后销毁自身（Destroy Actor）
- 重命名参数 `Target` → `Target Actor` 以避免混淆。

## 5. 测试与验证

- 单人/多人模式测试。
- Health 属性从 50 增加到 75，验证效果成功。

## 6. 扩展：蓝图制作蓝魔法药水

- 创建 `G_Potion_Mana`：
  - Duration Policy: Instant
  - Modifier: Mana +30
- 创建 `BP_ManaPotion`：
  - Mesh: Potion Bottle
  - Material: Blue Liquid
  - Sphere/Box Collision 均可使用
  - Overlap 时调用 `ApplyEffectToTarget`
- 测试 Mana 从低值增加，效果成功。

## 7. 可扩展性与设计理念

- 将逻辑从 C++ 移到蓝图增加灵活性：
  - 不同药水可复用同一 C++ 父类。
  - 可轻松切换碰撞形状（Sphere/Box）。
- 平衡性能与开发效率，C++ 与蓝图结合使用更灵活。

------

如果你需要，我可以帮你画一张 **“C++ vs Blueprint 责任分配的流程图”**，更直观展示药水效果的逻辑。

你希望我画吗？