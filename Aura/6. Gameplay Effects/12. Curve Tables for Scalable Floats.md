# Unreal Engine 5 Gameplay Effect - Scalable Float 与 Curve Table 流程总结

## 1. **引言**

- 本节目标：学习如何使用 **Scalable Float** 和 **Curve Table** 来让 Gameplay Effect 可随等级动态调整。
- 前提：已经了解 Instant Gameplay Effect 的基础应用。

------

## 2. **Scalable Float 简介**

### 2.1 功能

- Scalable Float 可以根据 **Gameplay Effect 的等级**动态调整数值。
- 相比硬编码常量值，更加灵活、数据驱动。
- 可与 Curve Table 结合，实现等级-数值映射。

### 2.2 使用场景

- 调整血量恢复（Potion Heal）
- 调整法力恢复（Potion Mana）
- 其他随等级变化的属性修改

------

## 3. **Curve Table 创建流程**

### 3.1 新建 Curve Table

1. 打开项目文件夹，例如 `Potion`。
2. 右键 → Miscellaneous → Curve Table。
3. 选择曲线类型：
   - Linear
   - Constant
   - Cubic
4. 命名：如 `CT_Potion_Heal`。

### 3.2 编辑 Curve Table

- **Spreadsheet View** 类似 Excel：
  - 列：等级（Level）
  - 行：数值（Float）
- **Graph View** 显示曲线趋势，便于观察平滑度和线性/非线性变化。
- 可拖动单点调整平滑曲线。

### 3.3 设定示例（Potion Heal）

| Level | Value |
| ----- | ----- |
| 1     | 5     |
| 2     | 7.5   |
| 3     | 10    |
| 4     | 15    |
| 5     | 20    |
| 6     | 30    |
| 7     | 45    |
| 8     | 60    |
| 9     | 85    |
| 10    | 100   |

- Graph View 可观察到 **近似指数增长**（虽然是线性插值）。

------

## 4. **将 Curve Table 应用到 Gameplay Effect**

1. 打开 Gameplay Effect，例如 `Potion Heal`。
2. 修改 **Magnitude Calculation Type** 为 Scalable Float。
3. 选择 Curve Table 并指定对应曲线（如 Healing Curve）。
4. 使用滑块预览等级对应数值。
5. 游戏中应用：
   - Level 1 → Heal 5
   - Level 10 → Heal 100（或根据实际曲线计算）

------

## 5. **Effect Actor 等级概念**

### 5.1 Actor Level 变量

- 新增变量 `Actor Level`（float），默认 1.0，可非整数。
- 用途：让 Effect Actor 自身拥有等级，影响所施加的所有 Gameplay Effect。

### 5.2 Blueprint 使用

- 在 Blueprint 中设置 Actor Level：
  - 可复制多个 Actor 并设定不同等级（如 1, 2, 3, 4.75）。
- 游戏中根据 Actor Level 自动计算对应 Curve Table 数值。
- 支持 **插值计算**：非整数等级可在曲线点间线性插值。

------

## 6. **多曲线支持**

- 一个 Curve Table 可包含多个曲线：
  - Healing Curve（血量）
  - Mana Curve（法力）
- 可复用一个 Curve Table 管理多个属性。
- 示例：
  - Potion Heal → Healing Curve
  - Potion Mana → Mana Curve

### 6.1 Mana Curve 示例

| Level | Value |
| ----- | ----- |
| 1     | 2.5   |
| 2     | 5     |
| 3     | 8.5   |
| 4     | 12.75 |
| 5     | 18    |
| 6     | 26    |
| 7     | 38    |
| 8     | 65    |
| 9     | 85    |
| 10    | 120   |

- Graph View 可手动调整平滑度。
- Spreadsheet View 可快速查看各等级数值。

------

## 7. **测试与调试**

1. Blueprint 中设置不同 Actor Level。
2. 游戏中拾取药水，观察 Health/Mana 变化：
   - Level 1 → Potion Heal 5
   - Level 2 → Potion Heal 7.5
   - Level 4.75 → 插值计算 18.5
3. 结合 **Pre Attribute Change** 限制属性最大值，防止超出上限。
4. 调试显示：
   - Health / Mana 实时增加
   - 确认曲线插值生效

------

## 8. **总结**

- **Scalable Float + Curve Table**：
  - 让数值随等级动态变化
  - 支持非整数等级插值
  - 可在一个 Curve Table 内管理多个属性
- 数据驱动设计：
  - Gameplay Effect 不再硬编码数值
  - 易于扩展和调节
- 测试验证：
  - 属性增长正确
  - Pre Attribute Change 确保安全值范围