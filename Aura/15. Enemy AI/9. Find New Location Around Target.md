这段视频教程重点讲解了如何优化 AI 的移动平滑度，并为近战敌人实现一种“攻击后绕行（Shuffle around）”的逻辑，使战斗表现更加灵动且具有攻击性。

以下是内容的详细总结：

------

### 一、 优化移动平滑度（解决抽搐问题）

- **问题描述**：AI 在切换行为分支（如从远距离接近切换到近距离攻击）时，动画会出现轻微的“顿挫”或“抽搐”。
- **混合空间（Blend Space）调整**：
  - 通过调整 **Weight Speed**（权重速度）参数来平滑过渡。
  - **权重速度含义**：采样权重从 0 变化到 1 所需的时间。数值越高，混合速度越快。
  - **解决方案**：将权重速度设置为 **4**（即 0.25 秒完成混合），这能显著减少 AI 启停时的僵硬感。

### 二、 扩展黑板（Blackboard）数据

为了让 AI 移动到随机位置，需要新的存储空间：

- **新增键**：`MoveToLocation` (Vector 类型)。
- **用途**：存储 AI 攻击后准备前往的随机目标坐标，与原本追踪玩家的 `TargetToFollow` 区分开。

### 三、 自定义任务：绕目标随机定位 (`BT_GoAroundTarget`)

通过蓝图创建名为 `BT_GoAroundTarget` 的任务，核心逻辑如下：

1. **黑板键选择器**：创建两个变量（`Target` 和 `NewLocation`）并暴露给编辑器，分别链接到黑板上的目标对象和新坐标键。
2. **获取导航点**：
   - 获取目标的当前坐标（`GetActorLocation`）。
   - 使用函数 **`GetRandomLocationInNavigableRadius`**（获取导航半径内的随机位置）。
   - **半径参数**：设置一个可调节的半径（默认 300 单位），确保生成的点是在导航网格（NavMesh）的可达区域内。
3. **写入黑板**：将找到的随机向量写入 `MoveToLocation`。

### 四、 行为树逻辑链的构建

在近战分支中，攻击任务之后加入以下序列：

1. **Attack (攻击)**：执行现有的攻击任务。
2. **Wait (等待)**：设置 1秒（带有 ±0.5秒 的随机偏差），给 AI 一个反应间隙。
3. **Find New Location (寻找新位置)**：执行上述自定义任务。
4. **MoveTo (移动)**：目标设置为 `MoveToLocation`。

### 五、 安全机制：时间限制装饰器 (`Time Limit`)

- **潜在风险**：由于 AI 角色本身不会在导航网格上挖洞，多个 AI 可能会互相阻挡或被玩家挡住，导致 `MoveTo` 任务陷入死循环。
- **解决方案**：在 `MoveTo` 节点上添加 **Time Limit（时间限制）** 装饰器。
  - 设置限时（如 2 秒）。
  - **中止模式**：设置为 `Observer Aborts Self`。
  - **效果**：如果 AI 2秒内无法到达随机点，将自动强制取消移动，重新回到树顶开始下一轮决策（通常是再次发起攻击），防止 AI 卡死。

### 六、 最终效果与总结

- **AI 表现**：近战敌人不再呆板地站桩输出，而是攻击一下、停顿一会儿、换个位子，再冲上来攻击。这种“反复横跳”的行为让战斗看起来更加疯狂且真实。
- **后续计划**：目前的攻击仍是调试球，接下来将引入真正的伤害逻辑以及远程敌人的行为模式。

------

**您是否需要我为您详细演示如何在行为树中配置“时间限制装饰器”的参数，或者想了解如何根据 AI 类型调整随机绕行的半径？**