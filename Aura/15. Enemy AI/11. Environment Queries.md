这段视频教程重点介绍了如何在虚幻引擎中创建并设置 **环境查询系统（EQS）** 的基础架构，并通过测试工具直观地查看查询结果。

以下是内容的详细总结：

------

### 一、 资产目录规范化

为了应对日益增多的 AI 相关文件，教程首先对项目目录进行了整理：

- **BehaviorTree 文件夹**：存放行为树（BT）和黑板（BB）资产。
- **Tasks 文件夹**：存放所有自定义的 BT Task 蓝图。
- **Services 文件夹**：存放行为树服务（BT Service）。
- **Controller 文件夹**：存放 AI 控制器蓝图。
- **EQS 文件夹**：存放环境查询系统相关资源。

### 二、 创建环境查询 (EQS) 资产

1. **资产创建**：在 `Artificial Intelligence` 菜单下选择 `Environment Query`。
2. **命名规范**：使用 `EQ_` 前缀，例如 `EQ_FindRangedAttackPosition`。
3. **核心结构**：EQS 编辑器包含一个**根节点（Root）**，通过拖拽可以连接**生成器（Generator）**。

### 三、 EQS 测试环境搭建

由于 EQS 逻辑是在“幕后”运行的，为了方便调试，教程建立了一个专门的测试流程：

1. **EQS Testing Pawn**：
   - 创建 `EQS Testing Pawn` 类的蓝图（BP_EQS_Testing）。
   - 该 Pawn 可以在场景中通过 **Debug 形状** 实时绘制生成的采样点。
2. **测试地图**：
   - 新建名为 `EQS_TestingMap` 的基础关卡。
   - 将测试 Pawn 放入关卡，并在其细节面板的 **Query Template** 属性中指定之前创建的 `EQ_FindRangedAttackPosition`。

### 四、 生成器 (Generators) 详解

生成器负责在环境中产生候选的“采样点”（Items）。教程展示了两种常用的生成器：

#### 1. Pathing Grid（寻路网格）

- **功能**：在查询者周围生成一个方形的网格点阵。
- **关键参数**：
  - **Grid Half Size**：网格的一半大小（类似半径）。例如设置为 1000，则总宽度为 2000。
  - **Space Between**：点与点之间的间距。间距越小，点越密集，计算量也越大。
  - **Generate Around**：指定生成中心，默认是 `EnvQueryContext_Querier`（查询者本人）。

#### 2. Points: Circle（圆形点阵）

- **功能**：在周围生成圆形的采样点。
- **关键参数**：
  - **Circle Radius**：圆的半径。
  - **Space Between**：点间距。
  - **Arc Angle**：弧度角度。如果小于 360°，可以生成扇形或半圆形的采样区域。

### 五、 核心逻辑预告：测试 (Tests)

教程最后强调了采样点生成后的处理逻辑：

- **过滤 (Filtering)**：基于特定规则（如视线是否被遮挡）剔除不合格的点。
- **评分 (Scoring)**：对剩下的点进行优劣排序（如距离玩家的远近），从而选出最佳位置。

------

**您想了解如何在这些生成的点上添加第一个“视线测试（Trace Test）”来过滤掉障碍物后的位置，还是想看看如何调整网格参数以达到性能与精度的平衡？**